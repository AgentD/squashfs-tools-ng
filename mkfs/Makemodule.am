gensquashfs_SOURCES = mkfs/mkfs.c mkfs/mkfs.h mkfs/block.c
gensquashfs_SOURCES += mkfs/options.c mkfs/meta.c mkfs/xattr.c
gensquashfs_SOURCES += mkfs/write_dir.c mkfs/write_inode.c
gensquashfs_LDADD = libsquashfs.a libfstree.a libcompress.a libutil.a
gensquashfs_CPPFLAGS = $(AM_CPPFLAGS)

if WITH_XZ
gensquashfs_LDADD += $(XZ_LIBS)
endif

if WITH_GZIP
gensquashfs_LDADD += $(ZLIB_LIBS)
endif

if WITH_LZO
gensquashfs_LDADD += $(LZO_LIBS)
endif

if WITH_LZ4
gensquashfs_LDADD += $(LZ4_LIBS)
endif

if WITH_ZSTD
gensquashfs_LDADD += $(ZSTD_LIBS)
endif

if WITH_SELINUX
gensquashfs_CPPFLAGS += -DWITH_SELINUX
gensquashfs_LDADD += $(LIBSELINUX_LIBS)
endif

bin_PROGRAMS += gensquashfs
