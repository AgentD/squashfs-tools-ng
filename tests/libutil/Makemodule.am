test_str_table_SOURCES = tests/libutil/str_table.c
test_str_table_LDADD = libutil.a libio.a libcompat.a
test_str_table_CPPFLAGS = $(AM_CPPFLAGS) -DTESTPATH=$(top_srcdir)/tests/libutil

test_rbtree_SOURCES = tests/libutil/rbtree.c
test_rbtree_LDADD = libutil.a libcompat.a

test_xxhash_SOURCES = tests/libutil/xxhash.c
test_xxhash_LDADD = libutil.a libcompat.a

test_threadpool_SOURCES = tests/libutil/threadpool.c
test_threadpool_CFLAGS = $(AM_CFLAGS) $(PTHREAD_CFLAGS)
test_threadpool_CPPFLAGS = $(AM_CPPFLAGS)
test_threadpool_LDADD = libutil.a libcompat.a $(PTHREAD_LIBS)

if HAVE_PTHREAD
test_threadpool_CPPFLAGS += -DHAVE_PTHREAD
endif

test_ismemzero_SOURCES = tests/libutil/is_memory_zero.c
test_ismemzero_LDADD = libutil.a libcompat.a

test_canonicalize_name_SOURCES = tests/libutil/canonicalize_name.c
test_canonicalize_name_LDADD = libutil.a libcompat.a

test_filename_sane_SOURCES = tests/libutil/filename_sane.c
test_filename_sane_SOURCES += lib/util/filename_sane.c
test_filename_sane_LDADD = libcompat.a libutil.a

test_sdate_epoch_SOURCES = tests/libutil/epoch.c
test_sdate_epoch_LDADD = libutil.a libcompat.a

test_hex_decode_SOURCES = tests/libutil/hex_decode.c
test_hex_decode_LDADD = libutil.a libcompat.a

test_base64_decode_SOURCES = tests/libutil/base64_decode.c
test_base64_decode_LDADD = libutil.a libcompat.a

test_fix_win32_filename_SOURCES = tests/libutil/fix_win32_filename.c
test_fix_win32_filename_LDADD = libutil.a libcompat.a

LIBUTIL_TESTS = \
	test_str_table test_rbtree test_xxhash test_threadpool test_ismemzero \
	test_canonicalize_name test_filename_sane test_fix_win32_filename \
	test_sdate_epoch test_hex_decode test_base64_decode

check_PROGRAMS += $(LIBUTIL_TESTS)
TESTS += $(LIBUTIL_TESTS)
EXTRA_DIST += $(top_srcdir)/tests/libutil/words.txt
